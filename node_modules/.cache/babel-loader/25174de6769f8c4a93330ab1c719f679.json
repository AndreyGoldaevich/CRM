{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/\\u0410\\u043D\\u0434\\u0440\\u0435\\u0439/Desktop/Vue 3 2021 \\u0412\\u043B\\u0430\\u0434\\u0438\\u043B\\u0435\\u043D \\u041C\\u0438\\u043D\\u0438\\u043D/014_2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/\\u0410\\u043D\\u0434\\u0440\\u0435\\u0439/Desktop/Vue 3 2021 \\u0412\\u043B\\u0430\\u0434\\u0438\\u043B\\u0435\\u043D \\u041C\\u0438\\u043D\\u0438\\u043D/014_2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport { ref, computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport AppPage from '../components/ui/AppPage';\nimport RequestTable from '../components/request/RequestTable';\nimport RequestModal from '../components/request/RequestModal';\nimport RequestFilter from '../components/request/RequestFilter';\nimport AppModal from '../components/ui/AppModal';\nimport AppLoader from '../components/ui/AppLoader';\nexport default {\n  setup: function setup() {\n    var store = useStore();\n    var modal = ref(false);\n    var loading = ref(false);\n    var filter = ref({});\n    onMounted( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              loading.value = true;\n              _context.next = 3;\n              return store.dispatch('request/load');\n\n            case 3:\n              loading.value = false;\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n    var requests = computed(function () {\n      return store.getters['request/requests'].filter(function (request) {\n        if (filter.value.name) {\n          return request.fio.includes(filter.value.name);\n        }\n\n        return request;\n      }).filter(function (request) {\n        if (filter.value.status) {\n          return filter.value.status === request.status;\n        }\n\n        return request;\n      });\n    });\n    return {\n      modal: modal,\n      requests: requests,\n      loading: loading,\n      filter: filter\n    };\n  },\n  components: {\n    AppPage: AppPage,\n    RequestTable: RequestTable,\n    AppModal: AppModal,\n    RequestModal: RequestModal,\n    AppLoader: AppLoader,\n    RequestFilter: RequestFilter\n  }\n};","map":{"version":3,"mappings":";;;;;;;AAmBA,SAAQA,GAAR,EAAaC,QAAb,EAAuBC,SAAvB,QAAuC,KAAvC;AACA,SAAQC,QAAR,QAAuB,MAAvB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,OAAOC,YAAP,MAAyB,oCAAzB;AACA,OAAOC,YAAP,MAAyB,oCAAzB;AACA,OAAOC,aAAP,MAA0B,qCAA1B;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AAEA,eAAe;EACbC,KADa,mBACL;IACN,IAAMC,KAAI,GAAIR,QAAQ,EAAtB;IACA,IAAMS,KAAI,GAAIZ,GAAG,CAAC,KAAD,CAAjB;IACA,IAAMa,OAAM,GAAIb,GAAG,CAAC,KAAD,CAAnB;IACA,IAAMc,MAAK,GAAId,GAAG,CAAC,EAAD,CAAlB;IAEAE,SAAS,0EAAC;MAAA;QAAA;UAAA;YAAA;cACRW,OAAO,CAACE,KAAR,GAAgB,IAAhB;cADQ;cAAA,OAEFJ,KAAK,CAACK,QAAN,CAAe,cAAf,CAFE;;YAAA;cAGRH,OAAO,CAACE,KAAR,GAAgB,KAAhB;;YAHQ;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAD,GAAT;IAMA,IAAME,QAAO,GAAIhB,QAAQ,CAAC;MAAA,OAAMU,KAAK,CAACO,OAAN,CAAc,kBAAd,EAC7BJ,MAD6B,CACtB,iBAAM,EAAK;QACjB,IAAIA,MAAM,CAACC,KAAP,CAAaI,IAAjB,EAAuB;UACrB,OAAOC,OAAO,CAACC,GAAR,CAAYC,QAAZ,CAAqBR,MAAM,CAACC,KAAP,CAAaI,IAAlC,CAAP;QACF;;QACA,OAAOC,OAAP;MACD,CAN6B,EAO7BN,MAP6B,CAOtB,iBAAM,EAAK;QACjB,IAAIA,MAAM,CAACC,KAAP,CAAaQ,MAAjB,EAAyB;UACvB,OAAOT,MAAM,CAACC,KAAP,CAAaQ,MAAb,KAAwBH,OAAO,CAACG,MAAvC;QACF;;QACA,OAAOH,OAAP;MACD,CAZ6B,CAAN;IAAA,CAAD,CAAzB;IAgBA,OAAO;MACLR,KAAK,EAALA,KADK;MACEK,QAAQ,EAARA,QADF;MACYJ,OAAO,EAAPA,OADZ;MACqBC,MAAK,EAALA;IADrB,CAAP;EAGD,CAhCY;EAiCbU,UAAU,EAAE;IACVpB,OAAO,EAAPA,OADU;IACDC,YAAY,EAAZA,YADC;IACaG,QAAQ,EAARA,QADb;IACuBF,YAAY,EAAZA,YADvB;IACqCG,SAAS,EAATA,SADrC;IACgDF,aAAY,EAAZA;EADhD;AAjCC,CAAf","names":["ref","computed","onMounted","useStore","AppPage","RequestTable","RequestModal","RequestFilter","AppModal","AppLoader","setup","store","modal","loading","filter","value","dispatch","requests","getters","name","request","fio","includes","status","components"],"sourceRoot":"","sources":["C:\\Users\\Андрей\\Desktop\\Vue 3 2021 Владилен Минин\\014_2\\src\\views\\Home.vue"],"sourcesContent":["<template>\n  <app-loader v-if=\"loading\" />\n  <app-page title=\"Список заявок\" v-else>\n    <template #header>\n      <button class=\"btn primary\" @click=\"modal = true\">Создать</button>\n    </template>\n\n    <request-filter v-model=\"filter\"></request-filter>\n    <request-table :requests=\"requests\"></request-table>\n\n    <teleport to=\"body\">\n      <app-modal v-if=\"modal\" title=\"Создать заявку\" @close=\"modal = false\">\n        <request-modal @created=\"modal = false\" />\n      </app-modal>\n    </teleport>\n  </app-page>\n</template>\n\n<script>\nimport {ref, computed, onMounted} from 'vue'\nimport {useStore} from 'vuex'\nimport AppPage from '../components/ui/AppPage'\nimport RequestTable from '../components/request/RequestTable'\nimport RequestModal from '../components/request/RequestModal'\nimport RequestFilter from '../components/request/RequestFilter'\nimport AppModal from '../components/ui/AppModal'\nimport AppLoader from '../components/ui/AppLoader'\n\nexport default {\n  setup() {\n    const store = useStore()\n    const modal = ref(false)\n    const loading = ref(false)\n    const filter = ref({})\n\n    onMounted(async () => {\n      loading.value = true\n      await store.dispatch('request/load')\n      loading.value = false\n    })\n\n    const requests = computed(() => store.getters['request/requests']\n      .filter(request => {\n        if (filter.value.name) {\n          return request.fio.includes(filter.value.name)\n        }\n        return request\n      })\n      .filter(request => {\n        if (filter.value.status) {\n          return filter.value.status === request.status\n        }\n        return request\n      })\n\n    )\n\n    return {\n      modal, requests, loading, filter\n    }\n  },\n  components: {\n    AppPage, RequestTable, AppModal, RequestModal, AppLoader, RequestFilter\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}