{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createVNode as _createVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createElementBlock as _createElementBlock, withCtx as _withCtx } from \"vue\";\n\nvar _hoisted_1 = /*#__PURE__*/_createElementVNode(\"strong\", null, \"Имя владельца\", -1);\n\nvar _hoisted_2 = /*#__PURE__*/_createElementVNode(\"strong\", null, \"Телефон\", -1);\n\nvar _hoisted_3 = /*#__PURE__*/_createElementVNode(\"strong\", null, \"Сумма\", -1);\n\nvar _hoisted_4 = /*#__PURE__*/_createElementVNode(\"strong\", null, \"Статус\", -1);\n\nvar _hoisted_5 = /*#__PURE__*/_createTextVNode(\": \");\n\nvar _hoisted_6 = {\n  \"class\": \"form-control\"\n};\n\nvar _hoisted_7 = /*#__PURE__*/_createElementVNode(\"label\", {\n  \"for\": \"status\"\n}, \"Статус\", -1);\n\nvar _hoisted_8 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"done\"\n}, \"Завершен\", -1);\n\nvar _hoisted_9 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"cancelled\"\n}, \"Отменен\", -1);\n\nvar _hoisted_10 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"active\"\n}, \"Активен\", -1);\n\nvar _hoisted_11 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"pending\"\n}, \"Выполняется\", -1);\n\nvar _hoisted_12 = [_hoisted_8, _hoisted_9, _hoisted_10, _hoisted_11];\nvar _hoisted_13 = {\n  key: 2,\n  \"class\": \"text-center text-white\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_app_loader = _resolveComponent(\"app-loader\");\n\n  var _component_app_status = _resolveComponent(\"app-status\");\n\n  var _component_app_page = _resolveComponent(\"app-page\");\n\n  return $setup.loading ? (_openBlock(), _createBlock(_component_app_loader, {\n    key: 0\n  })) : $setup.request ? (_openBlock(), _createBlock(_component_app_page, {\n    key: 1,\n    back: \"\",\n    title: \"Заявка\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createElementVNode(\"p\", null, [_hoisted_1, _createTextVNode(\": \" + _toDisplayString($setup.request.fio), 1)]), _createElementVNode(\"p\", null, [_hoisted_2, _createTextVNode(\": \" + _toDisplayString($setup.request.phone), 1)]), _createElementVNode(\"p\", null, [_hoisted_3, _createTextVNode(\": \" + _toDisplayString($setup.currency($setup.request.amount)), 1)]), _createElementVNode(\"p\", null, [_hoisted_4, _hoisted_5, _createVNode(_component_app_status, {\n        type: $setup.request.status\n      }, null, 8, [\"type\"])]), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _withDirectives(_createElementVNode(\"select\", {\n        id: \"status\",\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n          return $setup.status = $event;\n        })\n      }, _hoisted_12, 512), [[_vModelSelect, $setup.status]])]), _createElementVNode(\"button\", {\n        \"class\": \"btn danger\",\n        onClick: _cache[1] || (_cache[1] = function () {\n          return $setup.remove && $setup.remove.apply($setup, arguments);\n        })\n      }, \"Удалить\"), $setup.hasChanges ? (_openBlock(), _createElementBlock(\"button\", {\n        key: 0,\n        \"class\": \"btn\",\n        onClick: _cache[2] || (_cache[2] = function () {\n          return $setup.update && $setup.update.apply($setup, arguments);\n        })\n      }, \"Обновить\")) : _createCommentVNode(\"\", true)];\n    }),\n    _: 1\n  })) : (_openBlock(), _createElementBlock(\"h3\", _hoisted_13, \" Заявки с ID = \" + _toDisplayString(_ctx.$route.params.id) + \" нет. \", 1));\n}","map":{"version":3,"mappings":";;8BAGOA,oBAA8B,QAA9B,EAA8B,IAA9B,EAAQ,eAAR,EAAqB,EAArB;;8BACAA,oBAAwB,QAAxB,EAAwB,IAAxB,EAAQ,SAAR,EAAe,EAAf;;8BACAA,oBAAsB,QAAtB,EAAsB,IAAtB,EAAQ,OAAR,EAAa,EAAb;;8BACAA,oBAAuB,QAAvB,EAAuB,IAAvB,EAAQ,QAAR,EAAc,EAAd;;+CAAuB;;;EAErB,SAAM;;;8BACTA,oBAAkC,OAAlC,EAAkC;EAA3B,OAAI;AAAuB,CAAlC,EAAoB,QAApB,EAA0B,EAA1B;;8BAEEA,oBAAsC,QAAtC,EAAsC;EAA9BC,KAAK,EAAC;AAAwB,CAAtC,EAAqB,UAArB,EAA6B,EAA7B;;8BACAD,oBAA0C,QAA1C,EAA0C;EAAlCC,KAAK,EAAC;AAA4B,CAA1C,EAA0B,SAA1B,EAAiC,EAAjC;;+BACAD,oBAAuC,QAAvC,EAAuC;EAA/BC,KAAK,EAAC;AAAyB,CAAvC,EAAuB,SAAvB,EAA8B,EAA9B;;+BACAD,oBAA4C,QAA5C,EAA4C;EAApCC,KAAK,EAAC;AAA8B,CAA5C,EAAwB,aAAxB,EAAmC,EAAnC;;mBAHAC,YACAC,YACAC,aACAC;;;EAOK,SAAM;;;;;;;;;SApBCC,gCAAlBC,aAAwCC,qBAAxC,EAAwC;IAAAC;EAAA,CAAxC,KACyCH,gCAAzCC,aAkBWG,mBAlBX,EAkBW;UAAA;IAlBDC,IAAI,EAAJ,EAkBC;IAlBIC,KAAK,EAAC;EAkBV,CAlBX;wBACE;MAAA,OAAsD,CAAtDZ,oBAAsD,GAAtD,EAAsD,IAAtD,EAAsD,CAAnDa,UAAmD,mBAArB,OAAEC,iBAAER,eAAQS,GAAV,GAAa,EAAM,CAAtD,CAAsD,EACtDf,oBAAkD,GAAlD,EAAkD,IAAlD,EAAkD,CAA/CgB,UAA+C,mBAAvB,OAAEF,iBAAER,eAAQW,KAAV,GAAe,EAAM,CAAlD,CADsD,EAEtDjB,oBAA2D,GAA3D,EAA2D,IAA3D,EAA2D,CAAxDkB,UAAwD,mBAAlC,OAAEJ,iBAAER,gBAASA,eAAQa,MAAjB,CAAF,GAAyB,EAAO,CAA3D,CAFsD,EAGtDnB,oBAAqE,GAArE,EAAqE,IAArE,EAAqE,CAAlEoB,UAAkE,cAAzCC,aAAqCC,qBAArC,EAAqC;QAAxBC,IAAI,EAAEjB,eAAQkB;MAAU,CAArC,oBAAyC,CAArE,CAHsD,EAKtDxB,oBAQM,KARN,cAQM,CAPJyB,UAOI,kBANJzB,oBAKS,QALT,EAKS;QALD0B,EAAE,EAAC,QAKF;;iBALoBpB,gBAAMqB;;MAK1B,CALT,sCAA6BrB,gBAMzB,CARN,CALsD,EAetDN,oBAA2D,QAA3D,EAA2D;QAAnD,SAAM,YAA6C;QAA/B4B,OAAK;UAAA,OAAEtB,uDAAF;QAAA;MAA0B,CAA3D,EAA2C,SAA3C,CAfsD,EAgBZA,mCAA1CuB,oBAAuE,QAAvE,EAAuE;cAAA;QAA/D,SAAM,KAAyD;QAAlDD,OAAK;UAAA,OAAEtB,uDAAF;QAAA;MAA6C,CAAvE,EAAsD,UAAtD,kCAhBsD,CAAtD;IAAA;;GADF,oBAmBAuB,oBAEK,IAFL,eAA0C,oBAC1Bf,iBAAEgB,YAAOC,MAAP,CAAcL,EAAhB,CAD0B,GACN,QADpC,EAEA,CAFA","names":["_createElementVNode","value","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","$setup","_createBlock","_component_app_loader","key","_component_app_page","back","title","_hoisted_1","_toDisplayString","fio","_hoisted_2","phone","_hoisted_3","amount","_hoisted_4","_createVNode","_component_app_status","type","status","_hoisted_7","id","$event","onClick","_createElementBlock","_ctx","params"],"sourceRoot":"","sources":["C:\\Users\\Андрей\\Desktop\\Vue 3 2021 Владилен Минин\\014_2\\src\\views\\Request.vue"],"sourcesContent":["<template>\n  <app-loader v-if=\"loading\"></app-loader>\n  <app-page back title=\"Заявка\" v-else-if=\"request\">\n    <p><strong>Имя владельца</strong>: {{request.fio}}</p>\n    <p><strong>Телефон</strong>: {{request.phone}}</p>\n    <p><strong>Сумма</strong>: {{currency(request.amount)}}</p>\n    <p><strong>Статус</strong>: <app-status :type=\"request.status\" /></p>\n\n    <div class=\"form-control\">\n      <label for=\"status\">Статус</label>\n      <select id=\"status\" v-model=\"status\">\n        <option value=\"done\">Завершен</option>\n        <option value=\"cancelled\">Отменен</option>\n        <option value=\"active\">Активен</option>\n        <option value=\"pending\">Выполняется</option>\n      </select>\n    </div>\n\n    <button class=\"btn danger\" @click=\"remove\">Удалить</button>\n    <button class=\"btn\" @click=\"update\" v-if=\"hasChanges\">Обновить</button>\n  </app-page>\n  <h3 v-else class=\"text-center text-white\">\n    Заявки с ID = {{$route.params.id}} нет.\n  </h3>\n</template>\n\n<script>\nimport {ref, onMounted, computed} from 'vue'\nimport {useStore} from 'vuex'\nimport {useRoute, useRouter} from 'vue-router'\nimport AppPage from '../components/ui/AppPage'\nimport AppLoader from '../components/ui/AppLoader'\nimport AppStatus from '../components/ui/AppStatus'\nimport {currency} from '../utils/currency'\n\nexport default {\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const store = useStore()\n    const status = ref()\n    const loading = ref(true)\n    const request = ref({})\n\n    onMounted(async () => {\n      loading.value = true\n      request.value = await store.dispatch('request/loadOne', route.params.id)\n      status.value = request.value?.status\n      loading.value = false\n    })\n\n    const hasChanges = computed(() => request.value.status !== status.value)\n\n    const remove = async () => {\n      await store.dispatch('request/remove', route.params.id)\n      router.push('/')\n    }\n\n    const update = async () => {\n      const data = {...request.value, status: status.value, id: route.params.id}\n      await store.dispatch('request/update', data)\n      request.value.status = status.value\n    }\n\n    return {loading, request, currency, remove, update, status, hasChanges}\n  },\n  components: {AppPage, AppLoader, AppStatus}\n}\n</script>\n\n<style scoped>\n\n</style>"]},"metadata":{},"sourceType":"module"}