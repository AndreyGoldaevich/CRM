{"ast":null,"code":"import \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createVNode as _createVNode, withCtx as _withCtx, Teleport as _Teleport } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_app_loader = _resolveComponent(\"app-loader\");\n\n  var _component_request_filter = _resolveComponent(\"request-filter\");\n\n  var _component_request_table = _resolveComponent(\"request-table\");\n\n  var _component_request_modal = _resolveComponent(\"request-modal\");\n\n  var _component_app_modal = _resolveComponent(\"app-modal\");\n\n  var _component_app_page = _resolveComponent(\"app-page\");\n\n  return $setup.loading ? (_openBlock(), _createBlock(_component_app_loader, {\n    key: 0\n  })) : (_openBlock(), _createBlock(_component_app_page, {\n    key: 1,\n    title: \"Список заявок\"\n  }, {\n    header: _withCtx(function () {\n      return [_createElementVNode(\"button\", {\n        \"class\": \"btn primary\",\n        onClick: _cache[0] || (_cache[0] = function ($event) {\n          return $setup.modal = true;\n        })\n      }, \"Создать\")];\n    }),\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_request_filter, {\n        modelValue: $setup.filter,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n          return $setup.filter = $event;\n        })\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"]), _createVNode(_component_request_table, {\n        requests: $setup.requests\n      }, null, 8\n      /* PROPS */\n      , [\"requests\"]), (_openBlock(), _createBlock(_Teleport, {\n        to: \"body\"\n      }, [$setup.modal ? (_openBlock(), _createBlock(_component_app_modal, {\n        key: 0,\n        title: \"Создать заявку\",\n        onClose: _cache[3] || (_cache[3] = function ($event) {\n          return $setup.modal = false;\n        })\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_request_modal, {\n            onCreated: _cache[2] || (_cache[2] = function ($event) {\n              return $setup.modal = false;\n            })\n          })];\n        }),\n        _: 1\n        /* STABLE */\n\n      })) : _createCommentVNode(\"v-if\", true)]))];\n    }),\n    _: 1\n    /* STABLE */\n\n  }));\n}","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;SACoBA,gCAAlBC,aAA6BC,qBAA7B,EAA6B;IAAAC;EAAA,CAA7B,oBACAF,aAaWG,mBAbX,EAaW;UAAA;IAbDC,KAAK,EAAC;EAaL,CAbX;IACaC,MAAM,WACf;MAAA,OAAkE,CAAlEC,oBAAkE,QAAlE,EAAkE;QAA1D,SAAM,aAAoD;QAArCC,OAAK;UAAA,OAAER,eAAK,IAAP;QAAA;MAAgC,CAAlE,EAAkD,SAAlD,CAAkE,CAAlE;IAAA,CADe;wBAIjB;MAAA,OAAkD,CAAlDS,aAAkDC,yBAAlD,EAAkD;oBAAzBV,aAAyB;;iBAAzBA,gBAAMW;;MAAmB,CAAlD;;MAAA,iBAAkD,EAClDF,aAAoDG,wBAApD,EAAoD;QAApCC,QAAQ,EAAEb;MAA0B,CAApD,EAAkC,IAAlC,EAAkC;MAAA;MAAlC,EAAkC,YAAlC,CADkD,iBAGlDC,aAIWa,SAJX,EAIW;QAJDC,EAAE,EAAC;MAIF,CAJX,EAAmB,CACAf,8BAAjBC,aAEYe,oBAFZ,EAEY;cAAA;QAFYX,KAAK,EAAC,gBAElB;QAFoCY,OAAK;UAAA,OAAEjB,eAAK,KAAP;QAAA;MAEzC,CAFZ;4BACE;UAAA,OAA0C,CAA1CS,aAA0CS,wBAA1C,EAA0C;YAA1BC,SAAO;cAAA,OAAEnB,eAAK,KAAP;YAAA;UAAmB,CAA1C,CAA0C,CAA1C;QAAA;;;;OADF,sCADiB,CAAnB,CAHkD,EAAlD;IAAA;;;;GALF","names":["$setup","_createBlock","_component_app_loader","key","_component_app_page","title","header","_createElementVNode","onClick","_createVNode","_component_request_filter","$event","_component_request_table","requests","_Teleport","to","_component_app_modal","onClose","_component_request_modal","onCreated"],"sourceRoot":"","sources":["C:\\Users\\Андрей\\Desktop\\Vue 3 2021 Владилен Минин\\014_2\\src\\views\\Home.vue"],"sourcesContent":["<template>\n  <app-loader v-if=\"loading\" />\n  <app-page title=\"Список заявок\" v-else>\n    <template #header>\n      <button class=\"btn primary\" @click=\"modal = true\">Создать</button>\n    </template>\n\n    <request-filter v-model=\"filter\"></request-filter>\n    <request-table :requests=\"requests\"></request-table>\n\n    <teleport to=\"body\">\n      <app-modal v-if=\"modal\" title=\"Создать заявку\" @close=\"modal = false\">\n        <request-modal @created=\"modal = false\" />\n      </app-modal>\n    </teleport>\n  </app-page>\n</template>\n\n<script>\nimport {ref, computed, onMounted} from 'vue'\nimport {useStore} from 'vuex'\nimport AppPage from '../components/ui/AppPage'\nimport RequestTable from '../components/request/RequestTable'\nimport RequestModal from '../components/request/RequestModal'\nimport RequestFilter from '../components/request/RequestFilter'\nimport AppModal from '../components/ui/AppModal'\nimport AppLoader from '../components/ui/AppLoader'\n\nexport default {\n  setup() {\n    const store = useStore()\n    const modal = ref(false)\n    const loading = ref(false)\n    const filter = ref({})\n\n    onMounted(async () => {\n      loading.value = true\n      await store.dispatch('request/load')\n      loading.value = false\n    })\n\n    const requests = computed(() => store.getters['request/requests']\n      .filter(request => {\n        if (filter.value.name) {\n          return request.fio.includes(filter.value.name)\n        }\n        return request\n      })\n      .filter(request => {\n        if (filter.value.status) {\n          return filter.value.status === request.status\n        }\n        return request\n      })\n\n    )\n\n    return {\n      modal, requests, loading, filter\n    }\n  },\n  components: {\n    AppPage, RequestTable, AppModal, RequestModal, AppLoader, RequestFilter\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}