{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/\\u0410\\u043D\\u0434\\u0440\\u0435\\u0439/Desktop/Vue 3 2021 \\u0412\\u043B\\u0430\\u0434\\u0438\\u043B\\u0435\\u043D \\u041C\\u0438\\u043D\\u0438\\u043D/014_2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"C:/Users/\\u0410\\u043D\\u0434\\u0440\\u0435\\u0439/Desktop/Vue 3 2021 \\u0412\\u043B\\u0430\\u0434\\u0438\\u043B\\u0435\\u043D \\u041C\\u0438\\u043D\\u0438\\u043D/014_2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"C:/Users/\\u0410\\u043D\\u0434\\u0440\\u0435\\u0439/Desktop/Vue 3 2021 \\u0412\\u043B\\u0430\\u0434\\u0438\\u043B\\u0435\\u043D \\u041C\\u0438\\u043D\\u0438\\u043D/014_2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport axios from '../../axios/request';\nimport store from '../index';\nexport default {\n  namespaced: true,\n  state: function state() {\n    return {\n      requests: []\n    };\n  },\n  mutations: {\n    setRequests: function setRequests(state, requests) {\n      state.requests = requests;\n    },\n    addRequest: function addRequest(state, request) {\n      state.requests.push(request);\n    }\n  },\n  actions: {\n    create: function create(_ref, payload) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var commit, dispatch, token, _yield$axios$post, data;\n\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                commit = _ref.commit, dispatch = _ref.dispatch;\n                _context.prev = 1;\n                token = store.getters['auth/token'];\n                _context.next = 5;\n                return axios.post(\"/requests.json?auth=\".concat(token), payload);\n\n              case 5:\n                _yield$axios$post = _context.sent;\n                data = _yield$axios$post.data;\n                commit('addRequest', _objectSpread(_objectSpread({}, payload), {}, {\n                  id: data.name\n                }));\n                dispatch('setMessage', {\n                  value: 'Заявка успешно создана',\n                  type: 'primary'\n                }, {\n                  root: true\n                });\n                _context.next = 14;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](1);\n                dispatch('setMessage', {\n                  value: _context.t0.message,\n                  type: 'danger'\n                }, {\n                  root: true\n                });\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 11]]);\n      }))();\n    },\n    load: function load(_ref2) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var commit, dispatch, token, _yield$axios$get, data, requests;\n\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                commit = _ref2.commit, dispatch = _ref2.dispatch;\n                _context2.prev = 1;\n                token = store.getters['auth/token'];\n                _context2.next = 5;\n                return axios.get(\"/requests.json?auth=\".concat(token));\n\n              case 5:\n                _yield$axios$get = _context2.sent;\n                data = _yield$axios$get.data;\n                requests = Object.keys(data).map(function (id) {\n                  return _objectSpread(_objectSpread({}, data[id]), {}, {\n                    id: id\n                  });\n                });\n                commit('setRequests', requests);\n                _context2.next = 14;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](1);\n                dispatch('setMessage', {\n                  value: _context2.t0.message,\n                  type: 'danger'\n                }, {\n                  root: true\n                });\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[1, 11]]);\n      }))();\n    },\n    loadOne: function loadOne(_ref3, id) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var commit, dispatch, token, _yield$axios$get2, data;\n\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                commit = _ref3.commit, dispatch = _ref3.dispatch;\n                _context3.prev = 1;\n                token = store.getters['auth/token'];\n                _context3.next = 5;\n                return axios.get(\"/requests/\".concat(id, \".json?auth=\").concat(token));\n\n              case 5:\n                _yield$axios$get2 = _context3.sent;\n                data = _yield$axios$get2.data;\n                return _context3.abrupt(\"return\", data);\n\n              case 10:\n                _context3.prev = 10;\n                _context3.t0 = _context3[\"catch\"](1);\n                dispatch('setMessage', {\n                  value: _context3.t0.message,\n                  type: 'danger'\n                }, {\n                  root: true\n                });\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[1, 10]]);\n      }))();\n    },\n    remove: function remove(_ref4, id) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var dispatch, token;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                dispatch = _ref4.dispatch;\n                _context4.prev = 1;\n                token = store.getters['auth/token'];\n                _context4.next = 5;\n                return axios[\"delete\"](\"/requests/\".concat(id, \".json?auth=\").concat(token));\n\n              case 5:\n                dispatch('setMessage', {\n                  value: 'Заявка удалена',\n                  type: 'primary'\n                }, {\n                  root: true\n                });\n                _context4.next = 11;\n                break;\n\n              case 8:\n                _context4.prev = 8;\n                _context4.t0 = _context4[\"catch\"](1);\n                dispatch('setMessage', {\n                  value: _context4.t0.message,\n                  type: 'danger'\n                }, {\n                  root: true\n                });\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[1, 8]]);\n      }))();\n    },\n    update: function update(_ref5, request) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var dispatch, token;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                dispatch = _ref5.dispatch;\n                _context5.prev = 1;\n                token = store.getters['auth/token'];\n                _context5.next = 5;\n                return axios.put(\"/requests/\".concat(request.id, \".json?auth=\").concat(token), request);\n\n              case 5:\n                dispatch('setMessage', {\n                  value: 'Заявка обновлена',\n                  type: 'primary'\n                }, {\n                  root: true\n                });\n                _context5.next = 11;\n                break;\n\n              case 8:\n                _context5.prev = 8;\n                _context5.t0 = _context5[\"catch\"](1);\n                dispatch('setMessage', {\n                  value: _context5.t0.message,\n                  type: 'danger'\n                }, {\n                  root: true\n                });\n\n              case 11:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[1, 8]]);\n      }))();\n    }\n  },\n  getters: {\n    requests: function requests(state) {\n      return state.requests;\n    }\n  }\n};","map":{"version":3,"names":["axios","store","namespaced","state","requests","mutations","setRequests","addRequest","request","push","actions","create","payload","commit","dispatch","token","getters","post","data","id","name","value","type","root","message","load","get","Object","keys","map","loadOne","remove","update","put"],"sources":["C:/Users/Андрей/Desktop/Vue 3 2021 Владилен Минин/014_2/src/store/modules/request.module.js"],"sourcesContent":["import axios from '../../axios/request'\nimport store from '../index'\n\nexport default {\n  namespaced: true,\n  state() {\n    return {\n      requests: []\n    }\n  },\n  mutations: {\n    setRequests(state, requests) {\n      state.requests = requests\n    },\n    addRequest(state, request) {\n      state.requests.push(request)\n    }\n  },\n  actions: {\n    async create({ commit, dispatch }, payload) {\n      try {\n        const token = store.getters['auth/token']\n        const {data} = await axios.post(`/requests.json?auth=${token}`, payload)\n        commit('addRequest', {...payload, id: data.name})\n        dispatch('setMessage', {\n          value: 'Заявка успешно создана',\n          type: 'primary'\n        }, {root: true})\n      } catch (e) {\n        dispatch('setMessage', {\n          value: e.message,\n          type: 'danger'\n        }, {root: true})\n      }\n    },\n    async load({ commit, dispatch }) {\n      try {\n        const token = store.getters['auth/token']\n        const {data} = await axios.get(`/requests.json?auth=${token}`)\n        const requests = Object.keys(data).map(id => ({...data[id], id}))\n        commit('setRequests', requests)\n      } catch (e) {\n        dispatch('setMessage', {\n          value: e.message,\n          type: 'danger'\n        }, {root: true})\n      }\n    },\n    async loadOne({ commit, dispatch }, id) {\n      try {\n        const token = store.getters['auth/token']\n        const {data} = await axios.get(`/requests/${id}.json?auth=${token}`)\n        return data\n      } catch (e) {\n        dispatch('setMessage', {\n          value: e.message,\n          type: 'danger'\n        }, {root: true})\n      }\n    },\n    async remove({ dispatch }, id) {\n      try {\n        const token = store.getters['auth/token']\n        await axios.delete(`/requests/${id}.json?auth=${token}`)\n        dispatch('setMessage', {\n          value: 'Заявка удалена',\n          type: 'primary'\n        }, {root: true})\n      } catch (e) {\n        dispatch('setMessage', {\n          value: e.message,\n          type: 'danger'\n        }, {root: true})\n      }\n    },\n    async update({ dispatch }, request) {\n      try {\n        const token = store.getters['auth/token']\n        await axios.put(`/requests/${request.id}.json?auth=${token}`, request)\n        dispatch('setMessage', {\n          value: 'Заявка обновлена',\n          type: 'primary'\n        }, {root: true})\n      } catch (e) {\n        dispatch('setMessage', {\n          value: e.message,\n          type: 'danger'\n        }, {root: true})\n      }\n    }\n  },\n  getters: {\n    requests(state) {\n      return state.requests\n    }\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}