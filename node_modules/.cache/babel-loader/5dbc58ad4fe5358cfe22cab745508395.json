{"remainingRequest":"C:\\Users\\Андрей\\Desktop\\Vue 3 2021 Владилен Минин\\014_2\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Андрей\\Desktop\\Vue 3 2021 Владилен Минин\\014_2\\src\\store\\modules\\auth.module.js","dependencies":[{"path":"C:\\Users\\Андрей\\Desktop\\Vue 3 2021 Владилен Минин\\014_2\\src\\store\\modules\\auth.module.js","mtime":1653498536636},{"path":"C:\\Users\\Андрей\\Desktop\\Vue 3 2021 Владилен Минин\\014_2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652726598100},{"path":"C:\\Users\\Андрей\\Desktop\\Vue 3 2021 Владилен Минин\\014_2\\node_modules\\babel-loader\\lib\\index.js","mtime":1652726599643}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvXHUwNDEwXHUwNDNEXHUwNDM0XHUwNDQwXHUwNDM1XHUwNDM5L0Rlc2t0b3AvVnVlIDMgMjAyMSBcdTA0MTJcdTA0M0JcdTA0MzBcdTA0MzRcdTA0MzhcdTA0M0JcdTA0MzVcdTA0M0QgXHUwNDFDXHUwNDM4XHUwNDNEXHUwNDM4XHUwNDNELzAxNF8yL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvXHUwNDEwXHUwNDNEXHUwNDM0XHUwNDQwXHUwNDM1XHUwNDM5L0Rlc2t0b3AvVnVlIDMgMjAyMSBcdTA0MTJcdTA0M0JcdTA0MzBcdTA0MzRcdTA0MzhcdTA0M0JcdTA0MzVcdTA0M0QgXHUwNDFDXHUwNDM4XHUwNDNEXHUwNDM4XHUwNDNELzAxNF8yL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgZXJyb3IgfSBmcm9tICcuLi8uLi91dGlscy9lcnJvcic7CnZhciBUT0tFTl9LRVkgPSAnand0LXRva2VuJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IGZ1bmN0aW9uIHN0YXRlKCkgewogICAgcmV0dXJuIHsKICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFRPS0VOX0tFWSkKICAgIH07CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldFRva2VuOiBmdW5jdGlvbiBzZXRUb2tlbihzdGF0ZSwgdG9rZW4pIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oVE9LRU5fS0VZLCB0b2tlbik7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoc3RhdGUpIHsKICAgICAgc3RhdGUudG9rZW4gPSBudWxsOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShUT0tFTl9LRVkpOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHBheWxvYWQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY29tbWl0LCBkaXNwYXRjaCwgdXJsLCBfeWllbGQkYXhpb3MkcG9zdCwgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQsIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgICAgdXJsID0gImh0dHBzOi8vaWRlbnRpdHl0b29sa2l0Lmdvb2dsZWFwaXMuY29tL3YxL2FjY291bnRzOnNpZ25JbldpdGhQYXNzd29yZD9rZXk9Ii5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9GQl9LRVkpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCh1cmwsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcGF5bG9hZCksIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlCiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF95aWVsZCRheGlvcyRwb3N0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkYXhpb3MkcG9zdC5kYXRhOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRUb2tlbicsIGRhdGEuaWRUb2tlbik7CiAgICAgICAgICAgICAgICBjb21taXQoJ2NsZWFyTWVzc2FnZScsIG51bGwsIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnc2V0TWVzc2FnZScsIHsKICAgICAgICAgICAgICAgICAgdmFsdWU6IGVycm9yKF9jb250ZXh0LnQwLnJlc3BvbnNlLmRhdGEuZXJyb3IubWVzc2FnZSksCiAgICAgICAgICAgICAgICAgIHR5cGU6ICdkYW5nZXInCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDExXV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIHRva2VuOiBmdW5jdGlvbiB0b2tlbihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudG9rZW47CiAgICB9LAogICAgaXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoXywgZ2V0dGVycykgewogICAgICByZXR1cm4gISFnZXR0ZXJzLnRva2VuOwogICAgfQogIH0KfTs="},{"version":3,"sources":["C:/Users/Андрей/Desktop/Vue 3 2021 Владилен Минин/014_2/src/store/modules/auth.module.js"],"names":["axios","error","TOKEN_KEY","namespaced","state","token","localStorage","getItem","mutations","setToken","setItem","logout","removeItem","actions","login","payload","commit","dispatch","url","process","env","VUE_APP_FB_KEY","post","returnSecureToken","data","idToken","root","value","response","message","type","Error","getters","isAuthenticated","_"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,KAAR,QAAoB,mBAApB;AACA,IAAMC,SAAS,GAAG,WAAlB;AAEA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbC,EAAAA,KAFa,mBAEL;AACN,WAAO;AACLC,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqBL,SAArB;AADF,KAAP;AAGD,GANY;AAObM,EAAAA,SAAS,EAAE;AACTC,IAAAA,QADS,oBACAL,KADA,EACOC,KADP,EACc;AACrBD,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACAC,MAAAA,YAAY,CAACI,OAAb,CAAqBR,SAArB,EAAgCG,KAAhC;AACD,KAJQ;AAKTM,IAAAA,MALS,kBAKFP,KALE,EAKK;AACZA,MAAAA,KAAK,CAACC,KAAN,GAAc,IAAd;AACAC,MAAAA,YAAY,CAACM,UAAb,CAAwBV,SAAxB;AACD;AARQ,GAPE;AAiBbW,EAAAA,OAAO,EAAE;AACDC,IAAAA,KADC,uBAC2BC,OAD3B,EACoC;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAA7BC,gBAAAA,MAA6B,QAA7BA,MAA6B,EAArBC,QAAqB,QAArBA,QAAqB;AAAA;AAEjCC,gBAAAA,GAFiC,uFAEkDC,OAAO,CAACC,GAAR,CAAYC,cAF9D;AAAA;AAAA,uBAGlBrB,KAAK,CAACsB,IAAN,CAAWJ,GAAX,kCAAoBH,OAApB;AAA6BQ,kBAAAA,iBAAiB,EAAE;AAAhD,mBAHkB;;AAAA;AAAA;AAGhCC,gBAAAA,IAHgC,qBAGhCA,IAHgC;AAIvCR,gBAAAA,MAAM,CAAC,UAAD,EAAaQ,IAAI,CAACC,OAAlB,CAAN;AACAT,gBAAAA,MAAM,CAAC,cAAD,EAAiB,IAAjB,EAAuB;AAACU,kBAAAA,IAAI,EAAE;AAAP,iBAAvB,CAAN;AALuC;AAAA;;AAAA;AAAA;AAAA;AAOvCT,gBAAAA,QAAQ,CAAC,YAAD,EAAe;AACrBU,kBAAAA,KAAK,EAAE1B,KAAK,CAAC,YAAE2B,QAAF,CAAWJ,IAAX,CAAgBvB,KAAhB,CAAsB4B,OAAvB,CADS;AAErBC,kBAAAA,IAAI,EAAE;AAFe,iBAAf,EAGL;AAACJ,kBAAAA,IAAI,EAAE;AAAP,iBAHK,CAAR;AAPuC,sBAWjC,IAAIK,KAAJ,EAXiC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAa1C;AAdM,GAjBI;AAiCbC,EAAAA,OAAO,EAAE;AACP3B,IAAAA,KADO,iBACDD,KADC,EACM;AACX,aAAOA,KAAK,CAACC,KAAb;AACD,KAHM;AAIP4B,IAAAA,eAJO,2BAISC,CAJT,EAIYF,OAJZ,EAIqB;AAC1B,aAAO,CAAC,CAACA,OAAO,CAAC3B,KAAjB;AACD;AANM;AAjCI,CAAf","sourcesContent":["import axios from 'axios'\nimport {error} from '../../utils/error'\nconst TOKEN_KEY = 'jwt-token'\n\nexport default {\n  namespaced: true,\n  state() {\n    return {\n      token: localStorage.getItem(TOKEN_KEY)\n    }\n  },\n  mutations: {\n    setToken(state, token) {\n      state.token = token\n      localStorage.setItem(TOKEN_KEY, token)\n    },\n    logout(state) {\n      state.token = null\n      localStorage.removeItem(TOKEN_KEY)\n    }\n  },\n  actions: {\n    async login({ commit, dispatch }, payload) {\n      try {\n        const url = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${process.env.VUE_APP_FB_KEY}`\n        const {data} = await axios.post(url, {...payload, returnSecureToken: true})\n        commit('setToken', data.idToken)\n        commit('clearMessage', null, {root: true})\n      } catch (e) {\n        dispatch('setMessage', {\n          value: error(e.response.data.error.message),\n          type: 'danger'\n        }, {root: true})\n        throw new Error()\n      }\n    }\n  },\n  getters: {\n    token(state) {\n      return state.token\n    },\n    isAuthenticated(_, getters) {\n      return !!getters.token\n    }\n  }\n}"]}]}