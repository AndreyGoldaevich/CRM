{"remainingRequest":"C:\\Users\\Андрей\\Desktop\\Vue 3 2021 Владилен Минин\\014_2\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Андрей\\Desktop\\Vue 3 2021 Владилен Минин\\014_2\\src\\use\\login-form.js","dependencies":[{"path":"C:\\Users\\Андрей\\Desktop\\Vue 3 2021 Владилен Минин\\014_2\\src\\use\\login-form.js","mtime":1650308228429},{"path":"C:\\Users\\Андрей\\Desktop\\Vue 3 2021 Владилен Минин\\014_2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652726598100},{"path":"C:\\Users\\Андрей\\Desktop\\Vue 3 2021 Владилен Минин\\014_2\\node_modules\\babel-loader\\lib\\index.js","mtime":1652726599643}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvXHUwNDEwXHUwNDNEXHUwNDM0XHUwNDQwXHUwNDM1XHUwNDM5L0Rlc2t0b3AvVnVlIDMgMjAyMSBcdTA0MTJcdTA0M0JcdTA0MzBcdTA0MzRcdTA0MzhcdTA0M0JcdTA0MzVcdTA0M0QgXHUwNDFDXHUwNDM4XHUwNDNEXHUwNDM4XHUwNDNELzAxNF8yL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgdXNlRmllbGQsIHVzZUZvcm0gfSBmcm9tICd2ZWUtdmFsaWRhdGUnOwppbXBvcnQgKiBhcyB5dXAgZnJvbSAneXVwJzsKaW1wb3J0IHsgY29tcHV0ZWQsIHdhdGNoIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmV4cG9ydCBmdW5jdGlvbiB1c2VMb2dpbkZvcm0oKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CgogIHZhciBfdXNlRm9ybSA9IHVzZUZvcm0oKSwKICAgICAgaGFuZGxlU3VibWl0ID0gX3VzZUZvcm0uaGFuZGxlU3VibWl0LAogICAgICBpc1N1Ym1pdHRpbmcgPSBfdXNlRm9ybS5pc1N1Ym1pdHRpbmcsCiAgICAgIHN1Ym1pdENvdW50ID0gX3VzZUZvcm0uc3VibWl0Q291bnQ7CgogIHZhciBfdXNlRmllbGQgPSB1c2VGaWVsZCgnZW1haWwnLCB5dXAuc3RyaW5nKCkudHJpbSgpLnJlcXVpcmVkKCfQn9C+0LbQsNC70YPQudGB0YLQsCDQstCy0LXQtNC40YLQtSBlbWFpbCcpLmVtYWlsKCfQndC10L7QsdGF0L7QtNC40LzQviDQstCy0LXRgdGC0Lgg0LrQvtGA0YDQtdC60YLQvdGL0LkgZW1haWwnKSksCiAgICAgIGVtYWlsID0gX3VzZUZpZWxkLnZhbHVlLAogICAgICBlRXJyb3IgPSBfdXNlRmllbGQuZXJyb3JNZXNzYWdlLAogICAgICBlQmx1ciA9IF91c2VGaWVsZC5oYW5kbGVCbHVyOwoKICB2YXIgTUlOX0xFTkdUSCA9IDY7CgogIHZhciBfdXNlRmllbGQyID0gdXNlRmllbGQoJ3Bhc3N3b3JkJywgeXVwLnN0cmluZygpLnRyaW0oKS5yZXF1aXJlZCgn0J/QvtC20LDQu9GD0LnRgdGC0LAg0LLQstC10LTQuNGC0LUg0L/QsNGA0L7Qu9GMJykubWluKE1JTl9MRU5HVEgsICJcdTA0MUZcdTA0MzBcdTA0NDBcdTA0M0VcdTA0M0JcdTA0NEMgXHUwNDNEXHUwNDM1IFx1MDQzQ1x1MDQzRVx1MDQzNlx1MDQzNVx1MDQ0MiBcdTA0MzFcdTA0NEJcdTA0NDJcdTA0NEMgXHUwNDNDXHUwNDM1XHUwNDNEXHUwNDRDXHUwNDQ4XHUwNDM1ICIuY29uY2F0KE1JTl9MRU5HVEgsICIgXHUwNDQxXHUwNDM4XHUwNDNDXHUwNDMyXHUwNDNFXHUwNDNCXHUwNDNFXHUwNDMyIikpKSwKICAgICAgcGFzc3dvcmQgPSBfdXNlRmllbGQyLnZhbHVlLAogICAgICBwRXJyb3IgPSBfdXNlRmllbGQyLmVycm9yTWVzc2FnZSwKICAgICAgcEJsdXIgPSBfdXNlRmllbGQyLmhhbmRsZUJsdXI7CgogIHZhciBpc1Rvb01hbnlBdHRlbXB0cyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzdWJtaXRDb3VudC52YWx1ZSA+PSAzOwogIH0pOwogIHdhdGNoKGlzVG9vTWFueUF0dGVtcHRzLCBmdW5jdGlvbiAodmFsKSB7CiAgICBpZiAodmFsKSB7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBzdWJtaXRDb3VudC52YWx1ZSA9IDA7CiAgICAgIH0sIDE1MDApOwogICAgfQogIH0pOwogIHZhciBvblN1Ym1pdCA9IGhhbmRsZVN1Ym1pdCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHZhbHVlcykgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdhdXRoL2xvZ2luJywgdmFsdWVzKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByb3V0ZXIucHVzaCgnLycpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA2OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgNl1dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKSk7CiAgcmV0dXJuIHsKICAgIGVtYWlsOiBlbWFpbCwKICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgIGVFcnJvcjogZUVycm9yLAogICAgcEVycm9yOiBwRXJyb3IsCiAgICBlQmx1cjogZUJsdXIsCiAgICBwQmx1cjogcEJsdXIsCiAgICBvblN1Ym1pdDogb25TdWJtaXQsCiAgICBpc1N1Ym1pdHRpbmc6IGlzU3VibWl0dGluZywKICAgIGlzVG9vTWFueUF0dGVtcHRzOiBpc1Rvb01hbnlBdHRlbXB0cwogIH07Cn0="},{"version":3,"sources":["C:/Users/Андрей/Desktop/Vue 3 2021 Владилен Минин/014_2/src/use/login-form.js"],"names":["useField","useForm","yup","computed","watch","useStore","useRouter","useLoginForm","store","router","handleSubmit","isSubmitting","submitCount","string","trim","required","email","value","eError","errorMessage","eBlur","handleBlur","MIN_LENGTH","min","password","pError","pBlur","isTooManyAttempts","val","setTimeout","onSubmit","values","dispatch","push"],"mappings":";;;;AAAA,SAAQA,QAAR,EAAkBC,OAAlB,QAAgC,cAAhC;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAAQC,QAAR,EAAkBC,KAAlB,QAA8B,KAA9B;AACA,SAAQC,QAAR,QAAuB,MAAvB;AACA,SAAQC,SAAR,QAAwB,YAAxB;AAEA,OAAO,SAASC,YAAT,GAAwB;AAC7B,MAAMC,KAAK,GAAGH,QAAQ,EAAtB;AACA,MAAMI,MAAM,GAAGH,SAAS,EAAxB;;AAF6B,iBAGqBL,OAAO,EAH5B;AAAA,MAGtBS,YAHsB,YAGtBA,YAHsB;AAAA,MAGRC,YAHQ,YAGRA,YAHQ;AAAA,MAGMC,WAHN,YAGMA,WAHN;;AAAA,kBAKmCZ,QAAQ,CACtE,OADsE,EAEtEE,GAAG,CACAW,MADH,GAEGC,IAFH,GAGGC,QAHH,CAGY,0BAHZ,EAIGC,KAJH,CAIS,oCAJT,CAFsE,CAL3C;AAAA,MAKfA,KALe,aAKtBC,KALsB;AAAA,MAKMC,MALN,aAKRC,YALQ;AAAA,MAK0BC,KAL1B,aAKcC,UALd;;AAc7B,MAAMC,UAAU,GAAG,CAAnB;;AAd6B,mBAgBsCtB,QAAQ,CACzE,UADyE,EAEzEE,GAAG,CACAW,MADH,GAEGC,IAFH,GAGGC,QAHH,CAGY,2BAHZ,EAIGQ,GAJH,CAIOD,UAJP,2JAIkDA,UAJlD,uDAFyE,CAhB9C;AAAA,MAgBfE,QAhBe,cAgBtBP,KAhBsB;AAAA,MAgBSQ,MAhBT,cAgBLN,YAhBK;AAAA,MAgB6BO,KAhB7B,cAgBiBL,UAhBjB;;AAyB7B,MAAMM,iBAAiB,GAAGxB,QAAQ,CAAC;AAAA,WAAMS,WAAW,CAACK,KAAZ,IAAqB,CAA3B;AAAA,GAAD,CAAlC;AAEAb,EAAAA,KAAK,CAACuB,iBAAD,EAAoB,UAAAC,GAAG,EAAI;AAC9B,QAAIA,GAAJ,EAAS;AACPC,MAAAA,UAAU,CAAC;AAAA,eAAMjB,WAAW,CAACK,KAAZ,GAAoB,CAA1B;AAAA,OAAD,EAA8B,IAA9B,CAAV;AACD;AACF,GAJI,CAAL;AAMA,MAAMa,QAAQ,GAAGpB,YAAY;AAAA,uEAAC,iBAAMqB,MAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEpBvB,KAAK,CAACwB,QAAN,CAAe,YAAf,EAA6BD,MAA7B,CAFoB;;AAAA;AAG1BtB,cAAAA,MAAM,CAACwB,IAAP,CAAY,GAAZ;AAH0B;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA;AAAA;AAAA;AAAA,MAA7B;AAQA,SAAO;AACLjB,IAAAA,KAAK,EAALA,KADK;AAELQ,IAAAA,QAAQ,EAARA,QAFK;AAGLN,IAAAA,MAAM,EAANA,MAHK;AAILO,IAAAA,MAAM,EAANA,MAJK;AAKLL,IAAAA,KAAK,EAALA,KALK;AAMLM,IAAAA,KAAK,EAALA,KANK;AAOLI,IAAAA,QAAQ,EAARA,QAPK;AAQLnB,IAAAA,YAAY,EAAZA,YARK;AASLgB,IAAAA,iBAAiB,EAAjBA;AATK,GAAP;AAWD","sourcesContent":["import {useField, useForm} from 'vee-validate'\nimport * as yup from 'yup'\nimport {computed, watch} from 'vue'\nimport {useStore} from 'vuex'\nimport {useRouter} from 'vue-router'\n\nexport function useLoginForm() {\n  const store = useStore()\n  const router = useRouter()\n  const {handleSubmit, isSubmitting, submitCount} = useForm()\n\n  const {value: email, errorMessage: eError, handleBlur: eBlur} = useField(\n    'email',\n    yup\n      .string()\n      .trim()\n      .required('Пожалуйста введите email')\n      .email('Необходимо ввести корректный email')\n  )\n\n  const MIN_LENGTH = 6\n\n  const {value: password, errorMessage: pError, handleBlur: pBlur} = useField(\n    'password',\n    yup\n      .string()\n      .trim()\n      .required('Пожалуйста введите пароль')\n      .min(MIN_LENGTH, `Пароль не может быть меньше ${MIN_LENGTH} символов`)\n  )\n\n  const isTooManyAttempts = computed(() => submitCount.value >= 3)\n\n  watch(isTooManyAttempts, val => {\n    if (val) {\n      setTimeout(() => submitCount.value = 0, 1500)\n    }\n  })\n\n  const onSubmit = handleSubmit(async values => {\n    try {\n      await store.dispatch('auth/login', values)\n      router.push('/')\n    } catch (e) {\n    }\n  })\n\n  return {\n    email,\n    password,\n    eError,\n    pError,\n    eBlur,\n    pBlur,\n    onSubmit,\n    isSubmitting,\n    isTooManyAttempts\n  }\n}"]}]}